var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,c=(e,s)=>{for(var t in s||(s={}))l.call(s,t)&&i(e,t,s[t]);if(r)for(var t of r(s))n.call(s,t)&&i(e,t,s[t]);return e},o=(e,a)=>s(e,t(a)),d=(e,s,t)=>new Promise((a,r)=>{var l=e=>{try{i(t.next(e))}catch(s){r(s)}},n=e=>{try{i(t.throw(e))}catch(s){r(s)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);i((t=t.apply(e,s)).next())});import{r as x,u as m,j as u,L as h,C as p,S as g,a as j,H as b,X as y,M as f,b as N,c as v,d as w,T as _,e as F,f as k,G as A,g as C,h as S,i as M,k as E,l as L,P,m as D,I,n as O,U as $,o as z,E as q,p as T,q as B,B as V,R as U,s as R,t as G}from"./vendor-react-C-U61o4Q.js";import{c as J}from"./vendor-supabase-B0o3wX6K.js";import"./vendor-BJ4k3SM2.js";var X,H,Z=(X={"assets/index-D1WLkqMa.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const s=J("https://axdbkdjqwgznptkvkesa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF4ZGJrZGpxd2d6bnB0a3ZrZXNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNTgzNTAsImV4cCI6MjA3MDczNDM1MH0.o7fVmRBjyCyzudgzzwUnvsOV51AHte7YUqGxLELXc-0",{auth:{persistSession:!0,storageKey:"mercadolibre-auth",storage:"undefined"!=typeof window?window.localStorage:void 0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"Cache-Control":"no-cache"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),t=()=>{var e,t;const[a,r]=x.useState([]),[l,n]=x.useState(!1),[i,c]=x.useState(!1),[o,v]=x.useState(""),[w,_]=x.useState({}),[F,k]=x.useState(!0),A=m();x.useEffect(()=>{C(),S()},[]);const C=()=>d(null,null,function*(){const{data:e,error:t}=yield s.from("categories").select("*").order("name");e&&!t&&r(e)}),S=()=>d(null,null,function*(){try{k(!0);const{data:e,error:t}=yield s.functions.invoke("get-site-settings");if(t)return;_(e.data||{})}catch(e){}finally{k(!1)}});return u.jsxs("header",{className:"w-full sticky top-0 z-50",style:{fontFamily:'"Proxima Nova", -apple-system, Helvetica, Arial, sans-serif'},children:[i&&u.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sm:hidden shadow-md",children:u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"border-t border-gray-200 pt-2",children:[u.jsx("span",{className:"block text-sm text-gray-500 mb-2 font-medium",children:"CategorÃ­as"}),a.slice(0,6).map(e=>u.jsxs(h,{to:`/categoria/${e.slug}`,className:"block text-[#333333] hover:text-[#3483FA] py-2 font-medium flex items-center",children:[u.jsx("span",{className:"mr-2",children:e.name.includes("Celular")?"ðŸ“±":e.name.includes("TecnologÃ­a")||e.name.includes("Tecnologia")?"ðŸ’»":e.name.includes("Hogar")?"ðŸ ":e.name.includes("ElectrodomÃ©sticos")||e.name.includes("Electrodomesticos")?"ðŸ”Œ":e.name.includes("Deportes")?"âš½":e.name.includes("Moda")?"ðŸ‘•":"ðŸ“±"}),e.name]},e.id)),u.jsxs(h,{to:"/categoria/tecnologia",className:"block text-[#3483FA] font-medium py-2 flex items-center",children:["Ver todas",u.jsx(p,{className:"w-4 h-4 ml-1"})]})]})})}),u.jsx("div",{className:"bg-[#FFE600] border-b border-gray-200 px-4 py-3",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs(h,{to:"/",className:"flex-shrink-0",children:[u.jsx("img",{src:(null==(e=w.site_logo_url)?void 0:e.value)||"/logo.svg",alt:(null==(t=w.site_logo_alt)?void 0:t.value)||"MercadoLibre",className:"h-8 w-auto",onError:e=>{e.target.src="/logo.svg"}}),F&&u.jsx("div",{className:"h-8 w-24 bg-gray-200 animate-pulse rounded"})]}),u.jsx("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&A(`/search?q=${encodeURIComponent(o.trim())}`)},className:"flex-1 max-w-2xl",children:u.jsxs("div",{className:"relative flex",children:[u.jsx("input",{type:"text",value:o,onChange:e=>v(e.target.value),placeholder:"Buscar productos, marcas y mÃ¡s...",className:"w-full px-4 py-2 border border-[#E6E6E6] rounded-l-md focus:outline-none focus:ring-2 focus:ring-[#3483FA] focus:border-[#3483FA] text-sm shadow-sm",style:{height:"40px"}}),u.jsx("button",{type:"submit",className:"bg-[#3483FA] text-white px-4 py-2 rounded-r-md hover:bg-[#2968C8] focus:outline-none focus:ring-2 focus:ring-[#3483FA] transition-colors flex items-center justify-center",style:{height:"40px",width:"40px"},children:u.jsx(g,{className:"w-5 h-5"})})]})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"hidden md:flex items-center space-x-2 text-sm",children:u.jsx("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-2 py-1 rounded text-xs font-bold",children:"Disney+"})}),u.jsx(h,{to:"/ofertas",className:"hidden md:flex items-center space-x-1 text-gray-700 hover:text-[#3483FA] text-sm",children:u.jsx("span",{children:"Ofertas"})}),u.jsxs(h,{to:"/carrito",className:"flex items-center space-x-1 text-gray-700 hover:text-[#3483FA]",children:[u.jsx(j,{className:"w-5 h-5"}),u.jsx("span",{className:"hidden md:inline text-sm",children:"Carrito"})]}),u.jsx(h,{to:"/favoritos",className:"hidden md:flex items-center space-x-1 text-gray-700 hover:text-[#3483FA]",children:u.jsx(b,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>c(!i),className:"text-gray-700 hover:text-[#3483FA] sm:hidden",children:i?u.jsx(y,{className:"w-5 h-5"}):u.jsx(f,{className:"w-5 h-5"})})]})]}),u.jsx("nav",{className:"mt-3 overflow-x-auto no-scrollbar",children:u.jsxs("div",{className:"flex items-center space-x-6 text-sm whitespace-nowrap pb-1",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>n(!l),className:"flex items-center space-x-1 text-gray-700 hover:text-[#3483FA] py-1 px-2 rounded-md transition-colors",children:[u.jsx(f,{className:"w-4 h-4"}),u.jsx("span",{children:"CategorÃ­as"}),u.jsx(N,{className:"w-4 h-4 transition-transform "+(l?"rotate-180":"")})]}),l&&u.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 w-80",children:[u.jsx("div",{className:"grid grid-cols-2 p-4 gap-2",children:a.map(e=>u.jsxs(h,{to:`/categoria/${e.slug}`,className:"flex items-center space-x-2 px-3 py-2 hover:bg-gray-50 rounded text-gray-700 hover:text-[#3483FA] text-sm",onClick:()=>n(!1),children:[u.jsx("span",{className:"text-lg",children:e.name.includes("Celular")?"ðŸ“±":e.name.includes("Ofertas relÃ¡mpago")||e.name.includes("Tecnologia")?"ðŸ’»":e.name.includes("Hogar")?"ðŸ ":e.name.includes("ElectrodomÃ©sticos")||e.name.includes("Electrodomesticos")?"ðŸ”Œ":e.name.includes("Deportes")?"âš½":e.name.includes("Moda")?"ðŸ‘•":e.name.includes("Herramientas")?"ðŸ”¨":e.name.includes("ConstrucciÃ³n")||e.name.includes("Construccion")?"ðŸ—ï¸":e.name.includes("VehÃ­culos")||e.name.includes("Vehiculos")?"ðŸš—":e.name.includes("Inmuebles")?"ðŸ¢":e.name.includes("Supermercado")?"ðŸ›’":e.name.includes("Accesorios")?"ðŸ”§":"ðŸ“±"}),u.jsx("span",{className:"text-xs font-medium",children:e.name})]},e.id))}),u.jsx("div",{className:"border-t border-gray-100 p-3",children:u.jsxs(h,{to:"/categoria/tecnologia",className:"flex items-center justify-center space-x-1 text-[#3483FA] hover:underline font-medium text-sm",onClick:()=>n(!1),children:[u.jsx("span",{children:"Ver todas las categorÃ­as"}),u.jsx(p,{className:"w-4 h-4"})]})})]})]}),u.jsx(h,{to:"/categoria/tecnologia",className:"text-gray-700 hover:text-[#3483FA] py-1 px-2 rounded-md transition-colors font-medium",children:"Ofertas"}),u.jsx(h,{to:"/categoria/tecnologia",className:"text-gray-700 hover:text-[#3483FA] py-1 px-2 rounded-md transition-colors font-medium",children:"Historial"}),u.jsx(h,{to:"/categoria/tecnologia",className:"text-gray-700 hover:text-[#3483FA] py-1 px-2 rounded-md transition-colors font-medium",children:"Supermercado"}),u.jsx(h,{to:"/categoria/tecnologia",className:"text-gray-700 hover:text-[#3483FA] py-1 px-2 rounded-md transition-colors font-medium",children:"Moda"}),u.jsx(h,{to:"/categoria/tecnologia",className:"text-gray-700 hover:text-[#3483FA] py-1 px-2 rounded-md transition-colors font-medium",children:"Vender"}),u.jsx(h,{to:"/categoria/tecnologia",className:"text-gray-700 hover:text-[#3483FA] py-1 px-2 rounded-md transition-colors font-medium",children:"Ayuda"}),u.jsx(h,{to:"/categoria/tecnologia",className:"hidden md:block text-gray-700 hover:text-[#3483FA]",children:"ElectrÃ³nica"}),u.jsx(h,{to:"/categoria/tecnologia",className:"hidden md:block text-gray-700 hover:text-[#3483FA]",children:"Mejoras para el hogar"}),u.jsx(h,{to:"/categoria/tecnologia",className:"hidden md:block text-gray-700 hover:text-[#3483FA]",children:"Juguetes"}),u.jsx(h,{to:"/categoria/tecnologia",className:"hidden lg:block text-gray-700 hover:text-[#3483FA]",children:"Salud"})]})})]})})]})},a=()=>u.jsx("footer",{className:"bg-[#F7F7F7] border-t border-gray-200 mt-16",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"AtenciÃ³n al cliente"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(h,{to:"/ayuda",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Centro de ayuda"})}),u.jsx("li",{children:u.jsx(h,{to:"/contacto",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"ContÃ¡ctanos"})}),u.jsx("li",{children:u.jsx(h,{to:"/terminos",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"TÃ©rminos y condiciones"})}),u.jsx("li",{children:u.jsx(h,{to:"/privacidad",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"PolÃ­tica de privacidad"})})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Acerca de"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(h,{to:"/nosotros",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Quienes somos"})}),u.jsx("li",{children:u.jsx(h,{to:"/carreras",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Trabaja con nosotros"})}),u.jsx("li",{children:u.jsx(h,{to:"/prensa",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Prensa"})}),u.jsx("li",{children:u.jsx(h,{to:"/inversores",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Inversores"})})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Mi cuenta"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(h,{to:"/login",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Ingresar"})}),u.jsx("li",{children:u.jsx(h,{to:"/register",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Crear cuenta"})}),u.jsx("li",{children:u.jsx(h,{to:"/mis-compras",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Mis compras"})}),u.jsx("li",{children:u.jsx(h,{to:"/favoritos",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Favoritos"})})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"SÃ­guenos"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Facebook"})}),u.jsx("li",{children:u.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Twitter"})}),u.jsx("li",{children:u.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"Instagram"})}),u.jsx("li",{children:u.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-[#3483FA] text-sm",children:"YouTube"})})]})]})]}),u.jsx("div",{className:"border-t border-gray-200 mt-8 pt-6",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[u.jsx("div",{className:"text-sm text-gray-600",children:u.jsx("p",{children:"Â© 2024 MercadoLibre MÃ©xico. Todos los derechos reservados."})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:"/payment-visa.png",alt:"Visa",className:"h-6"}),u.jsx("img",{src:"/payment-mastercard.png",alt:"Mastercard",className:"h-6"}),u.jsx("img",{src:"/payment-amex.png",alt:"American Express",className:"h-6"}),u.jsx("img",{src:"/payment-paypal.png",alt:"PayPal",className:"h-6"})]})]})})]})}),r=()=>{const e=()=>{const e=Math.floor(7200*Math.random());return{hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60}},[s,t]=x.useState(()=>e());return x.useEffect(()=>{const s=setInterval(()=>{t(s=>{let{hours:t,minutes:a,seconds:r}=s;if(r>0)r--;else if(r=59,a>0)a--;else{if(a=59,!(t>0))return e();t--}return{hours:t,minutes:a,seconds:r}})},1e3);return()=>clearInterval(s)},[]),u.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white py-2 px-4",children:u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm font-medium",children:[u.jsx(v,{className:"w-4 h-4"}),u.jsx("span",{children:"ðŸ”¥ Ofertas por tiempo limitado"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{children:"Termina en:"}),u.jsxs("div",{className:"flex items-center space-x-1 bg-white bg-opacity-20 rounded px-2 py-1",children:[u.jsx("span",{className:"font-bold",children:String(s.hours).padStart(2,"0")}),u.jsx("span",{children:":"}),u.jsx("span",{className:"font-bold",children:String(s.minutes).padStart(2,"0")}),u.jsx("span",{children:":"}),u.jsx("span",{className:"font-bold",children:String(s.seconds).padStart(2,"0")})]})]}),u.jsx("span",{className:"hidden md:inline",children:"âœ¨ Â¡No te las pierdas!"})]})})})},l=()=>{const{pathname:e}=w();return x.useEffect(()=>{const e=setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},0);return()=>{clearTimeout(e)}},[e]),null},n=({product:e})=>{const s=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(e),t=()=>{var s;const t=`${e.name.toLowerCase().replace(/\s+/g,"-")}-${(null==(s=e.variant)?void 0:s.toLowerCase().replace(/\s+/g,"-"))||""}`;return`/producto/${e.id}/${t}`};return u.jsxs("div",{className:"bg-white border border-[#E6E6E6] rounded-lg hover:shadow-lg transition-shadow duration-200 p-2 md:p-4",children:[u.jsxs("div",{className:"relative mb-2 md:mb-4",children:[u.jsx(h,{to:t(),children:u.jsx("img",{src:e.images&&e.images.length>0?e.images[0]:"/placeholder/300x300.png",alt:`${e.name} ${e.variant||""}`,className:"w-full h-36 md:h-48 object-contain rounded-lg",onError:e=>{e.target.src="/placeholder/300x300.png"}})}),e.featured&&u.jsxs("div",{className:"absolute top-1 left-1 md:top-2 md:left-2 bg-[#FFE600] text-[#333333] text-xs font-bold px-1 md:px-2 py-0.5 md:py-1 rounded",style:{fontSize:"10px"},children:[u.jsx("span",{className:"hidden md:inline",children:"MÃS VENDIDO"}),u.jsx("span",{className:"md:hidden",children:"TOP"})]}),e.is_pinned&&u.jsxs("div",{className:"absolute top-6 left-1 md:top-8 md:left-2 bg-red-500 text-white text-xs font-bold px-1 md:px-2 py-0.5 md:py-1 rounded",style:{fontSize:"10px"},children:[u.jsx("span",{className:"hidden md:inline",children:"DESTACADO"}),u.jsx("span",{className:"md:hidden",children:"â­"})]}),u.jsx("button",{className:"absolute top-1 right-1 md:top-2 md:right-2 p-1 md:p-2 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:u.jsx(b,{className:"w-3 h-3 md:w-4 md:h-4 text-[#666666] hover:text-red-500"})})]}),u.jsxs("div",{className:"space-y-1 md:space-y-2",children:[u.jsx(h,{to:t(),children:u.jsx("h3",{className:"text-xs md:text-sm font-normal text-[#3483FA] hover:underline line-clamp-2",style:{fontSize:"12px",lineHeight:"1.35"},children:u.jsxs("span",{className:"md:text-sm",children:[e.name," ",e.variant&&`${e.variant}`]})})}),u.jsxs("div",{className:"space-y-0.5 md:space-y-1",children:[u.jsx("p",{className:"text-lg md:text-2xl font-normal text-[#333333]",style:{fontSize:"18px"},children:u.jsx("span",{className:"md:text-2xl",children:s(e.price)})}),Math.random()>.5&&u.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2",children:[u.jsx("span",{className:"text-[#00A650] text-xs font-bold",style:{fontSize:"10px"},children:"22% OFF"}),u.jsx("span",{className:"text-[#999999] line-through text-xs",style:{fontSize:"10px"},children:s(1.3*e.price)})]}),u.jsx("p",{className:"text-[#00A650] text-xs md:text-sm",style:{fontSize:"11px"},children:u.jsxs("span",{className:"md:text-sm",children:["en 12x ",s(e.price/12)," sin interÃ©s"]})})]}),u.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2",children:[u.jsx(_,{className:"w-3 h-3 md:w-4 md:h-4 text-[#00A650]"}),u.jsx("span",{className:"text-[#00A650] font-semibold text-xs md:text-sm",style:{fontSize:"11px"},children:u.jsx("span",{className:"md:text-sm",children:"EnvÃ­o gratis"})}),u.jsx("span",{className:"text-xs bg-[#00A650] text-white px-1 py-0.5 rounded font-bold",style:{fontSize:"9px"},children:"FULL"})]}),u.jsx("p",{className:"text-[#00A650] text-xs",style:{fontSize:"10px"},children:u.jsx("span",{className:"md:text-xs",children:"Llega gratis maÃ±ana"})}),u.jsx("p",{className:"text-[#666666] text-xs",style:{fontSize:"10px"},children:u.jsx("span",{className:"md:text-xs",children:"Nuevo | +25 vendidos"})}),u.jsx("div",{className:"pt-1 md:pt-2 space-y-2",children:u.jsxs(h,{to:e.buy_link?"#":t(),className:"btn-primary block w-full text-center py-1.5 md:py-2 rounded-md font-medium text-xs md:text-sm",onClick:s=>{e.buy_link&&(s.preventDefault(),window.open(e.buy_link,"_blank"))},children:[u.jsx("span",{className:"md:hidden",children:"Comprar"}),u.jsx("span",{className:"hidden md:inline",children:"Comprar ahora"})]})})]})]})};function i(){const[e,t]=x.useState([]),[a,r]=x.useState(null),[l,i]=x.useState(!0);x.useEffect(()=>{m(),c(),o()},[]);const c=()=>d(null,null,function*(){try{const{data:e}=yield s.from("seo_settings").select("*").single();(null==e?void 0:e.home_title)?document.title=e.home_title:(null==e?void 0:e.site_name)&&(document.title=e.site_name)}catch(e){}}),o=()=>d(null,null,function*(){try{const{data:e,error:t}=yield s.from("banner_settings").select("*").eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);if(t)throw t;e&&e.length>0&&r(e[0])}catch(e){r({id:0,title:"Descubre los Mejores Productos",subtitle:"Calidad premium para el mercado mexicano",background_color:"#3B82F6",text_color:"#FFFFFF",is_active:!0})}}),m=()=>d(null,null,function*(){try{const{data:e,error:a}=yield s.from("products").select("*").order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}).limit(12);if(a)throw a;t(e||[])}catch(e){}finally{i(!1)}});return l?u.jsx("div",{className:"min-h-screen bg-gray-50",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando productos..."})]})})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"text-white py-20 relative overflow-hidden",style:{backgroundColor:(null==a?void 0:a.background_color)||"#3B82F6",color:(null==a?void 0:a.text_color)||"#FFFFFF",backgroundImage:(null==a?void 0:a.background_image)?`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(${a.background_image})`:(null==a?void 0:a.background_color)?void 0:"linear-gradient(to right, #3B82F6, #9333EA)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:(null==a?void 0:a.title)||"Descubre los Mejores Productos"}),u.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:(null==a?void 0:a.subtitle)||"Calidad premium para el mercado mexicano"})]})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Productos Destacados"}),u.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Explora nuestra selecciÃ³n curada de productos de alta calidad"})]}),e.length>0?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(e=>u.jsx(n,{product:e},e.id))}):u.jsx("div",{className:"text-center py-16",children:u.jsx("p",{className:"text-gray-500 text-lg",children:"No hay productos disponibles."})})]}),u.jsx("div",{className:"bg-gray-800 text-white py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Â¿Listo para descubrir mÃ¡s?"}),u.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Explora todas nuestras categorÃ­as y encuentra exactamente lo que necesitas"}),u.jsx("a",{href:"/categoria/tecnologia",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold px-8 py-3 rounded-lg transition-colors",children:"Ver Todos los Productos"})]})})]})}const X=()=>{const{slug:e}=F(),[t,a]=k(),[r,l]=x.useState(null),[i,m]=x.useState([]),[p,g]=x.useState(!0),[j,b]=x.useState("relevance"),[y,f]=x.useState({min:"",max:""}),[v,w]=x.useState({category_title_template:"",site_name:"",default_title:""}),[_,S]=x.useState(1),[M,E]=x.useState(0);x.useEffect(()=>{e&&L()},[e,_,j]);const L=()=>d(null,null,function*(){g(!0);try{const{data:a}=yield s.from("seo_settings").select("*").single();a&&w(a);const{data:r,error:n}=yield s.from("categories").select("*").eq("slug",e).maybeSingle();if(r&&!n){l(r);const e=(null==a?void 0:a.category_title_template)?a.category_title_template.replace("{categoryName}",r.name).replace("{siteName}",a.site_name||""):`${r.name} - MercadoLibre MÃ©xico`;document.title=e;let n=s.from("products").select("*",{count:"exact"}).eq("category_id",r.id).eq("is_active",!0);const i=t.get("min_price"),c=t.get("max_price");switch(i&&(n=n.gte("price",parseFloat(i))),c&&(n=n.lte("price",parseFloat(c))),n=n.order("is_pinned",{ascending:!1}),j){case"price_asc":n=n.order("price",{ascending:!0});break;case"price_desc":n=n.order("price",{ascending:!1});break;case"newest":n=n.order("created_at",{ascending:!1});break;default:n=n.order("featured",{ascending:!1}).order("created_at",{ascending:!1})}const o=48*(_-1),d=o+48-1;n=n.range(o,d);const{data:x,error:u,count:h}=yield n;x&&!u&&(m(x),E(h||0))}}catch(a){}finally{g(!1)}}),P=e=>{b(e),S(1)},D=Math.ceil(M/48);return p?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#3483FA] mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Cargando productos..."})]})}):r?u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200",children:u.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:u.jsxs("nav",{className:"text-sm text-gray-600",children:[u.jsx(h,{to:"/",className:"hover:text-[#3483FA]",children:"Inicio"}),u.jsx("span",{className:"mx-2",children:">"}),u.jsx("span",{className:"text-gray-900 font-medium",children:r.name})]})})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.name}),u.jsxs("p",{className:"text-gray-600",children:[M.toLocaleString()," productos disponibles"]})]}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[u.jsx("div",{className:"lg:hidden",children:u.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 mb-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-sm text-gray-700",children:"Ordenar por:"}),u.jsxs("div",{className:"relative flex-1",children:[u.jsxs("select",{value:j,onChange:e=>P(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-1 focus:ring-[#3483FA] w-full",children:[u.jsx("option",{value:"relevance",children:"MÃ¡s relevantes"}),u.jsx("option",{value:"price_asc",children:"Menor precio"}),u.jsx("option",{value:"price_desc",children:"Mayor precio"}),u.jsx("option",{value:"newest",children:"MÃ¡s recientes"})]}),u.jsx(N,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})})}),u.jsx("div",{className:"hidden lg:block lg:w-64 flex-shrink-0",children:u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sticky top-4",children:[u.jsx("div",{className:"mb-4",children:u.jsx("h2",{className:"font-semibold text-gray-900",children:"Filtros"})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Precio"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("input",{type:"number",placeholder:"MÃ­nimo",value:y.min,onChange:e=>f(o(c({},y),{min:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"}),u.jsx("input",{type:"number",placeholder:"MÃ¡ximo",value:y.max,onChange:e=>f(o(c({},y),{max:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>{const e=new URLSearchParams(t);y.min?e.set("min_price",y.min):e.delete("min_price"),y.max?e.set("max_price",y.max):e.delete("max_price"),a(e),S(1)},className:"btn-primary flex-1 py-2 text-sm",children:"Aplicar"}),u.jsx("button",{onClick:()=>{f({min:"",max:""}),a({}),S(1)},className:"btn-secondary flex-1 py-2 text-sm",children:"Limpiar"})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"EnvÃ­o"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm text-gray-700",children:"EnvÃ­o gratis"})]}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm text-gray-700",children:"EnvÃ­o FULL"})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"CondiciÃ³n"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",className:"rounded border-gray-300",defaultChecked:!0}),u.jsx("span",{className:"text-sm text-gray-700",children:"Nuevo"})]}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm text-gray-700",children:"Usado"})]})]})]})]})]})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"hidden lg:block bg-white border border-gray-200 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("span",{className:"text-sm text-gray-700",children:"Ordenar por:"}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:j,onChange:e=>P(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-[#3483FA]",children:[u.jsx("option",{value:"relevance",children:"MÃ¡s relevantes"}),u.jsx("option",{value:"price_asc",children:"Menor precio"}),u.jsx("option",{value:"price_desc",children:"Mayor precio"}),u.jsx("option",{value:"newest",children:"MÃ¡s recientes"})]}),u.jsx(N,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{className:"p-2 border border-gray-300 rounded hover:bg-gray-50",children:u.jsx(A,{className:"w-4 h-4"})}),u.jsx("button",{className:"p-2 border border-gray-300 rounded hover:bg-gray-50",children:u.jsx(C,{className:"w-4 h-4"})})]})]})}),i.length>0?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:i.map(e=>u.jsx(n,{product:e},e.id))}),D>1&&u.jsxs("div",{className:"flex justify-center space-x-2 mt-8",children:[u.jsx("button",{onClick:()=>S(Math.max(1,_-1)),disabled:1===_,className:"px-3 py-2 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Anterior"}),[...Array(Math.min(10,D))].map((e,s)=>{const t=s+1;return u.jsx("button",{onClick:()=>S(t),className:"px-3 py-2 border rounded "+(_===t?"bg-[#3483FA] text-white border-[#3483FA]":"border-gray-300 hover:bg-gray-50"),children:t},t)}),u.jsx("button",{onClick:()=>S(Math.min(D,_+1)),disabled:_===D,className:"px-3 py-2 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Siguiente"})]})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx("p",{className:"text-gray-600 mb-4",children:"No se encontraron productos en esta categorÃ­a"}),u.jsx(h,{to:"/",className:"text-[#3483FA] hover:underline",children:"Explorar otras categorÃ­as"})]})]})]})]})]}):u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"CategorÃ­a no encontrada"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"La categorÃ­a que buscas no existe."}),u.jsx(h,{to:"/",className:"bg-[#3483FA] text-white px-6 py-3 rounded-md hover:bg-[#2968C8]",children:"Volver al inicio"})]})})},H=()=>{const{id:e}=F(),[t,a]=x.useState(null),[r,l]=x.useState(null),[n,i]=x.useState(0),[c,o]=x.useState(1),[m,g]=x.useState(!0),[j,y]=x.useState([]),[f,N]=x.useState({product_title_template:"",site_name:"",default_title:""});x.useEffect(()=>{e&&v()},[e]);const v=()=>d(null,null,function*(){try{const{data:t}=yield s.from("seo_settings").select("*").single();t&&N(t);const{data:r,error:n}=yield s.from("products").select("*").eq("id",e).eq("is_active",!0).maybeSingle();if(r&&!n){a(r);const n=`${r.name}${r.variant?` - ${r.variant}`:""}`,i=(null==t?void 0:t.product_title_template)?t.product_title_template.replace("{productName}",n).replace("{siteName}",t.site_name||""):`${n} - MercadoLibre MÃ©xico`;if(document.title=i,r.category_id){const{data:t}=yield s.from("categories").select("*").eq("id",r.category_id).maybeSingle();t&&l(t);const{data:a}=yield s.from("products").select("*").eq("category_id",r.category_id).eq("is_active",!0).neq("id",e).limit(4);a&&y(a)}}}catch(t){}finally{g(!1)}}),w=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(e),k=()=>(null==t?void 0:t.images)&&t.images.length>0?t.images:["/placeholder/600x600.png"];if(m)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#3483FA] mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Cargando producto..."})]})});if(!t)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Producto no encontrado"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"El producto que buscas no existe o no estÃ¡ disponible."}),u.jsx(h,{to:"/",className:"bg-[#3483FA] text-white px-6 py-3 rounded-md hover:bg-[#2968C8]",children:"Volver al inicio"})]})});const A=k();return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200",children:u.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:u.jsxs("nav",{className:"text-sm text-gray-600",children:[u.jsx(h,{to:"/",className:"hover:text-[#3483FA]",children:"Inicio"}),r&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2",children:">"}),u.jsx(h,{to:`/category/${r.slug}`,className:"hover:text-[#3483FA]",children:r.name})]}),u.jsx("span",{className:"mx-2",children:">"}),u.jsxs("span",{className:"text-gray-900 font-medium",children:[t.name," ",t.variant&&`- ${t.variant}`]})]})})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-200 p-4",children:[u.jsx("img",{src:A[n],alt:`${t.name} ${t.variant||""}`,className:"w-full h-96 object-contain",onError:e=>{e.target.src="/placeholder/600x600.png"}}),A.length>1&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{const e=k();i(s=>(s-1+e.length)%e.length)},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-50",children:u.jsx(S,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>{const e=k();i(s=>(s+1)%e.length)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-50",children:u.jsx(p,{className:"w-5 h-5"})})]})]}),A.length>1&&u.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:A.map((e,s)=>u.jsx("button",{onClick:()=>i(s),className:"flex-shrink-0 w-16 h-16 border-2 rounded-lg overflow-hidden "+(s===n?"border-[#3483FA]":"border-gray-200"),children:u.jsx("img",{src:e,alt:`Vista ${s+1}`,className:"w-full h-full object-contain"})},s))})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[t.featured&&u.jsx("span",{className:"inline-block bg-[#FFE600] text-black text-xs font-bold px-2 py-1 rounded mb-2",children:"MÃS VENDIDO"}),u.jsxs("h1",{className:"text-2xl font-normal text-gray-900 mb-2",children:[t.name," ",t.variant&&`- ${t.variant}`]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(e=>u.jsx(M,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},e))}),u.jsx("span",{className:"text-sm text-gray-600",children:"(4.8) 1,234 opiniones"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-3xl font-normal text-gray-900",children:w(t.price)}),u.jsxs("p",{className:"text-[#00A650] text-lg",children:["en 12x ",w(t.price/12)," sin interÃ©s"]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Stock disponible"}),u.jsx("span",{className:"text-sm text-[#00A650]",children:"+25 disponibles"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(_,{className:"w-5 h-5 text-[#00A650]"}),u.jsx("span",{className:"text-sm text-[#00A650] font-semibold",children:"EnvÃ­o gratis"}),u.jsx("span",{className:"text-xs bg-[#00A650] text-white px-1 py-0.5 rounded font-bold",children:"FULL"})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"Llega gratis maÃ±ana"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(E,{className:"w-5 h-5 text-[#3483FA]"}),u.jsx("span",{className:"text-sm text-[#3483FA]",children:"Compra Protegida"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("span",{className:"text-sm text-gray-700",children:"Cantidad:"}),u.jsxs("div",{className:"flex items-center border border-gray-300 rounded",children:[u.jsx("button",{onClick:()=>o(Math.max(1,c-1)),className:"px-3 py-1 hover:bg-gray-100",children:"-"}),u.jsx("span",{className:"px-4 py-1 border-x border-gray-300",children:c}),u.jsx("button",{onClick:()=>o(c+1),className:"px-3 py-1 hover:bg-gray-100",children:"+"})]})]}),u.jsx("div",{className:"space-y-3",children:u.jsx("button",{onClick:e=>{e.preventDefault(),(null==t?void 0:t.buy_link)&&window.open(t.buy_link,"_blank")},className:"btn-primary w-full py-3 font-medium",disabled:!(null==t?void 0:t.buy_link),children:"Comprar ahora"})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-[#3483FA]",children:[u.jsx(b,{className:"w-5 h-5"}),u.jsx("span",{children:"Agregar a favoritos"})]}),u.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-[#3483FA]",children:[u.jsx(L,{className:"w-5 h-5"}),u.jsx("span",{children:"Compartir"})]})]})]})]})]}),t.description&&u.jsxs("div",{className:"mt-12 bg-white rounded-lg border border-gray-200 p-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"DescripciÃ³n del producto"}),u.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:t.description})]}),j.length>0&&u.jsxs("div",{className:"mt-12",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Productos relacionados"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(e=>{var s;return u.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:u.jsxs(h,{to:`/producto/${e.id}/${e.name.toLowerCase().replace(/\s+/g,"-")}`,children:[u.jsx("img",{src:(null==(s=e.images)?void 0:s[0])||"/placeholder/300x300.png",alt:e.name,className:"w-full h-32 object-contain mb-2"}),u.jsxs("h3",{className:"text-sm text-[#3483FA] hover:underline line-clamp-2 mb-2",children:[e.name," ",e.variant&&`- ${e.variant}`]}),u.jsx("p",{className:"text-lg font-normal text-gray-900",children:w(e.price)})]})},e.id)})})]})]})]})},Z=()=>{var e,t,a,r,l;const[n,i]=x.useState(!1),[m,h]=x.useState(""),[p,g]=x.useState([]),[j,b]=x.useState([]),[f,N]=x.useState(!1),[v,w]=x.useState(!1),[_,F]=x.useState(null),[k,A]=x.useState(!1),[C,S]=x.useState(null),[M,E]=x.useState(!1),[L,V]=x.useState({home_title:"",product_title_template:"",category_title_template:"",default_title:"",site_name:""}),[U,R]=x.useState(!1),[G,J]=x.useState({title:"",subtitle:"",background_color:"#3B82F6",text_color:"#FFFFFF",is_active:!0}),[X,H]=x.useState(!1),[Z,K]=x.useState({}),[W,Y]=x.useState(null),[Q,ee]=x.useState(null),[se,te]=x.useState(!1),[ae,re]=x.useState(!1),[le,ne]=x.useState({name:"",variant:"",price:"",description:"",category_id:"",buy_link:"",featured:!1,is_pinned:!1,images:[]});x.useEffect(()=>{n&&ce()},[n]);const ie=()=>d(null,null,function*(){"19961015"===m?i(!0):alert("å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•")}),ce=()=>d(null,null,function*(){N(!0);try{const{data:e}=yield s.from("products").select("*").order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});e&&g(e);const{data:t}=yield s.from("categories").select("*").order("name");t&&b(t);const{data:a}=yield s.from("seo_settings").select("*").single();a&&V(a);const{data:r}=yield s.from("banner_settings").select("*").eq("is_active",!0).single();r&&J(r),yield de()}catch(e){}finally{N(!1)}}),oe=()=>{ne({name:"",variant:"",price:"",description:"",category_id:"",buy_link:"",featured:!1,is_pinned:!1,images:[]}),F(null),w(!1)},de=()=>d(null,null,function*(){try{const{data:e,error:t}=yield s.functions.invoke("get-site-settings");if(t)return;K(e.data||{})}catch(e){}}),xe=()=>{Y(null),ee(null),H(!1)};return n?u.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"äº§å“ç®¡ç†ç³»ç»Ÿ"}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs("button",{onClick:()=>{oe(),w(!0)},className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[u.jsx(P,{className:"w-5 h-5"}),u.jsx("span",{children:"æ·»åŠ äº§å“"})]}),u.jsxs("button",{onClick:()=>E(!0),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 flex items-center space-x-2",children:[u.jsx(D,{className:"w-5 h-5"}),u.jsx("span",{children:"SEOè®¾ç½®"})]}),u.jsxs("button",{onClick:()=>R(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 flex items-center space-x-2",children:[u.jsx(I,{className:"w-5 h-5"}),u.jsx("span",{children:"Bannerè®¾ç½®"})]}),u.jsxs("button",{onClick:()=>H(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 flex items-center space-x-2",children:[u.jsx(O,{className:"w-5 h-5"}),u.jsx("span",{children:"ç½‘ç«™è®¾ç½®"})]}),u.jsx("button",{onClick:()=>i(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600",children:"é€€å‡ºç™»å½•"})]})]})}),v&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold",children:_?"ç¼–è¾‘äº§å“":"æ·»åŠ æ–°äº§å“"}),u.jsx("button",{onClick:oe,className:"text-gray-400 hover:text-gray-600",children:u.jsx(y,{className:"w-6 h-6"})})]}),u.jsxs("form",{onSubmit:e=>d(null,null,function*(){e.preventDefault(),N(!0);try{const e={name:le.name,variant:le.variant||null,price:parseFloat(le.price),description:le.description||null,category_id:le.category_id?parseInt(le.category_id):null,buy_link:le.buy_link||null,featured:le.featured,is_pinned:le.is_pinned,images:le.images.length>0?le.images:null,is_active:!0,updated_at:(new Date).toISOString()};if(_){const{error:t}=yield s.from("products").update(e).eq("id",_.id);if(t)throw t;alert("äº§å“æ›´æ–°æˆåŠŸ")}else{const{error:t}=yield s.from("products").insert([e]);if(t)throw t;alert("äº§å“åˆ›å»ºæˆåŠŸ")}oe(),ce()}catch(t){alert("ä¿å­˜å¤±è´¥")}finally{N(!1)}}),className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"äº§å“åç§° *"}),u.jsx("input",{type:"text",required:!0,value:le.name,onChange:e=>ne(o(c({},le),{name:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å˜ä½“/åž‹å·"}),u.jsx("input",{type:"text",value:le.variant,onChange:e=>ne(o(c({},le),{variant:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ä»·æ ¼ (MXN) *"}),u.jsx("input",{type:"number",step:"0.01",required:!0,value:le.price,onChange:e=>ne(o(c({},le),{price:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»"}),u.jsxs("select",{value:le.category_id,onChange:e=>ne(o(c({},le),{category_id:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",children:[u.jsx("option",{value:"",children:"é€‰æ‹©åˆ†ç±»"}),j.map(e=>u.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"äº§å“æè¿°"}),u.jsx("textarea",{rows:6,value:le.description,onChange:e=>ne(o(c({},le),{description:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"è´­ä¹°é“¾æŽ¥"}),u.jsx("input",{type:"url",value:le.buy_link,onChange:e=>ne(o(c({},le),{buy_link:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"https://example.com/product"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:le.featured,onChange:e=>ne(o(c({},le),{featured:e.target.checked})),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"è®¾ä¸ºæŽ¨èäº§å“"})]}),u.jsxs("label",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",checked:le.is_pinned,onChange:e=>ne(o(c({},le),{is_pinned:e.target.checked})),className:"rounded border-gray-300"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ç½®é¡¶äº§å“ï¼ˆæ˜¾ç¤ºåœ¨åˆ—è¡¨æœ€å‰é¢ï¼‰"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"äº§å“å›¾ç‰‡"}),u.jsx("div",{className:"mb-4 p-4 border-2 border-dashed border-gray-300 rounded-md hover:border-[#3483FA] transition-colors",children:u.jsxs("div",{className:"text-center",children:[u.jsx($,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),u.jsxs("label",{className:"cursor-pointer",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡ æˆ– æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„"}),u.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>d(null,null,function*(){const t=e.target.files;if(!t||0===t.length)return;const a=yield(e=>d(null,null,function*(){if(!e||0===e.length)return[];A(!0);const t=[];try{for(let a=0;a<e.length;a++){const r=e[a],l=r.name.split(".").pop(),n=`${Date.now()}-${Math.random().toString(36).substring(2)}.${l}`,{data:i,error:c}=yield s.storage.from("product-images").upload(n,r);if(c){alert(`ä¸Šä¼ å›¾ç‰‡ ${r.name} å¤±è´¥: ${c.message}`);continue}const{data:{publicUrl:o}}=s.storage.from("product-images").getPublicUrl(n);t.push(o)}return t}catch(a){return alert("ä¸Šä¼ å›¾ç‰‡å¤±è´¥"),[]}finally{A(!1)}}))(t);a.length>0&&ne(e=>o(c({},e),{images:[...e.images,...a]})),e.target.value=""}),className:"hidden",disabled:k})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"æ”¯æŒ JPG, PNG, WebP æ ¼å¼ï¼Œæœ€å¤§ 5MB"}),k&&u.jsxs("div",{className:"mt-2 flex items-center justify-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#3483FA]"}),u.jsx("span",{className:"ml-2 text-sm text-[#3483FA]",children:"ä¸Šä¼ ä¸­..."})]})]})}),le.images.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"å·²æ·»åŠ çš„å›¾ç‰‡:"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:le.images.map((e,s)=>u.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",children:[u.jsx("img",{src:e,alt:`äº§å“å›¾ç‰‡ ${s+1}`,className:"w-full h-20 object-cover",onError:e=>{e.target.src="/placeholder/100x100.png"}}),u.jsx("button",{type:"button",onClick:()=>(e=>{ne(s=>o(c({},s),{images:s.images.filter((s,t)=>t!==e)}))})(s),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Ã—"})]},s))})]}),u.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"æˆ–æ‰‹åŠ¨æ·»åŠ å›¾ç‰‡URL:"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("input",{type:"url",placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA] text-sm",onKeyPress:e=>{if("Enter"===e.key){e.preventDefault();const s=e.target,t=s.value.trim();t&&(ne(e=>o(c({},e),{images:[...e.images,t]})),s.value="")}}}),u.jsx("button",{type:"button",onClick:e=>{const s=e.target.previousElementSibling,t=s.value.trim();t&&(ne(e=>o(c({},e),{images:[...e.images,t]})),s.value="")},className:"px-3 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 text-sm",children:"æ·»åŠ "})]})]})]}),u.jsxs("div",{className:"flex space-x-4 pt-6",children:[u.jsxs("button",{type:"submit",disabled:f,className:"bg-[#3483FA] text-white px-6 py-3 rounded-md hover:bg-[#2968C8] flex items-center space-x-2 disabled:opacity-50",children:[u.jsx(z,{className:"w-5 h-5"}),u.jsx("span",{children:f?"ä¿å­˜ä¸­...":"ä¿å­˜äº§å“"})]}),u.jsx("button",{type:"button",onClick:oe,className:"bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600",children:"å–æ¶ˆ"})]})]})]})})}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["äº§å“åˆ—è¡¨ (",p.length,")"]})}),f?u.jsxs("div",{className:"p-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#3483FA] mx-auto mb-4"}),u.jsx("p",{children:"åŠ è½½ä¸­..."})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"äº§å“ä¿¡æ¯"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ä»·æ ¼"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"åˆ†ç±»"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"çŠ¶æ€"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>{var t;const a=j.find(s=>s.id===e.category_id);return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("img",{src:(null==(t=e.images)?void 0:t[0])||"/placeholder/100x100.png",alt:e.name,className:"w-12 h-12 object-cover rounded"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.variant&&u.jsx("div",{className:"text-sm text-gray-500",children:e.variant})]})]})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(r=e.price,new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(r))}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(null==a?void 0:a.name)||"-"}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[e.is_active&&u.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"æ´»è·ƒ"}),e.featured&&u.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"æŽ¨è"}),e.is_pinned&&u.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"ç½®é¡¶"})]})}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>{return t=e.id,a=e.is_pinned||!1,d(null,null,function*(){try{const{error:e}=yield s.from("products").update({is_pinned:!a,updated_at:(new Date).toISOString()}).eq("id",t);if(e)throw e;ce()}catch(e){alert("åˆ‡æ¢ç½®é¡¶çŠ¶æ€å¤±è´¥")}});var t,a},className:"text-gray-400 hover:text-red-500 "+(e.is_pinned?"text-red-500":""),title:e.is_pinned?"å–æ¶ˆç½®é¡¶":"ç½®é¡¶äº§å“",children:u.jsx(D,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>{var s;const t=`${e.name.toLowerCase().replace(/\s+/g,"-")}-${(null==(s=e.variant)?void 0:s.toLowerCase().replace(/\s+/g,"-"))||""}`;window.open(`/producto/${e.id}/${t}`,"_blank")},className:"text-gray-400 hover:text-[#3483FA]",title:"æŸ¥çœ‹äº§å“",children:u.jsx(q,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>(e=>{var s;F(e),ne({name:e.name,variant:e.variant||"",price:e.price.toString(),description:e.description||"",category_id:(null==(s=e.category_id)?void 0:s.toString())||"",buy_link:e.buy_link||"",featured:e.featured||!1,is_pinned:e.is_pinned||!1,images:e.images||[]}),w(!0)})(e),className:"text-gray-400 hover:text-[#3483FA]",title:"ç¼–è¾‘äº§å“",children:u.jsx(T,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>{return t=e.id,d(null,null,function*(){if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº§å“å—ï¼Ÿ"))try{const{error:e}=yield s.from("products").delete().eq("id",t);if(e)throw e;alert("äº§å“åˆ é™¤æˆåŠŸ"),ce()}catch(e){alert("åˆ é™¤å¤±è´¥")}});var t},className:"text-gray-400 hover:text-red-500",title:"åˆ é™¤äº§å“",children:u.jsx(B,{className:"w-5 h-5"})})]})})]},e.id);var r})})]})})]}),M&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsx("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"SEOè®¾ç½®"}),u.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:u.jsx(y,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"é¦–é¡µæ ‡é¢˜"}),u.jsx("input",{type:"text",value:L.home_title||"",onChange:e=>V(o(c({},L),{home_title:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"ä¾‹ï¼šMercadoLibre MÃ©xico - Compra y vende en lÃ­nea"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"äº§å“è¯¦æƒ…é¡µæ ‡é¢˜æ¨¡æ¿"}),u.jsx("input",{type:"text",value:L.product_title_template||"",onChange:e=>V(o(c({},L),{product_title_template:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"ä¾‹ï¼š{productName} - {siteName}"}),u.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["å¯ç”¨å˜é‡ï¼š","{productName}",", ","{siteName}"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"åˆ†ç±»é¡µæ ‡é¢˜æ¨¡æ¿"}),u.jsx("input",{type:"text",value:L.category_title_template||"",onChange:e=>V(o(c({},L),{category_title_template:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"ä¾‹ï¼š{categoryName} - {siteName}"}),u.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["å¯ç”¨å˜é‡ï¼š","{categoryName}",", ","{siteName}"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ç½‘ç«™åç§°"}),u.jsx("input",{type:"text",value:L.site_name||"",onChange:e=>V(o(c({},L),{site_name:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"ä¾‹ï¼šMercadoLibre MÃ©xico"})]}),u.jsxs("div",{className:"flex space-x-4 pt-6",children:[u.jsxs("button",{onClick:()=>d(null,null,function*(){N(!0);try{const{error:e}=yield s.from("seo_settings").upsert(L);if(e)throw e;alert("SEOè®¾ç½®ä¿å­˜æˆåŠŸ"),E(!1)}catch(e){alert("ä¿å­˜SEOè®¾ç½®å¤±è´¥")}finally{N(!1)}}),disabled:f,className:"bg-[#3483FA] text-white px-6 py-3 rounded-md hover:bg-[#2968C8] flex items-center space-x-2 disabled:opacity-50",children:[u.jsx(z,{className:"w-5 h-5"}),u.jsx("span",{children:f?"ä¿å­˜ä¸­...":"ä¿å­˜è®¾ç½®"})]}),u.jsx("button",{type:"button",onClick:()=>E(!1),className:"bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600",children:"å–æ¶ˆ"})]})]})]})})}),U&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsx("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Bannerè®¾ç½®"}),u.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:u.jsx(y,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ä¸»æ ‡é¢˜"}),u.jsx("input",{type:"text",value:G.title,onChange:e=>J(o(c({},G),{title:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"ä¾‹ï¼šDescubre los Mejores Productos"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å‰¯æ ‡é¢˜"}),u.jsx("input",{type:"text",value:G.subtitle,onChange:e=>J(o(c({},G),{subtitle:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"ä¾‹ï¼šCalidad premium para el mercado mexicano"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"èƒŒæ™¯å›¾ç‰‡URL"}),u.jsx("input",{type:"text",value:G.background_image||"",onChange:e=>J(o(c({},G),{background_image:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"https://example.com/banner.jpg"}),u.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"å¦‚æžœä¸è®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œå°†ä½¿ç”¨çº¯è‰²èƒŒæ™¯"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"èƒŒæ™¯é¢œè‰²"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"color",value:G.background_color,onChange:e=>J(o(c({},G),{background_color:e.target.value})),className:"w-10 h-10 rounded border border-gray-300"}),u.jsx("input",{type:"text",value:G.background_color,onChange:e=>J(o(c({},G),{background_color:e.target.value})),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"#3B82F6"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ–‡å­—é¢œè‰²"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"color",value:G.text_color,onChange:e=>J(o(c({},G),{text_color:e.target.value})),className:"w-10 h-10 rounded border border-gray-300"}),u.jsx("input",{type:"text",value:G.text_color,onChange:e=>J(o(c({},G),{text_color:e.target.value})),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",placeholder:"#FFFFFF"})]})]})]}),u.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[u.jsxs("button",{type:"button",onClick:()=>d(null,null,function*(){N(!0);try{const{data:e,error:t}=yield s.functions.invoke("save-banner-settings",{body:{settings:G}});if(t)throw t;alert("Bannerè®¾ç½®ä¿å­˜æˆåŠŸ"),R(!1),ce()}catch(e){alert("ä¿å­˜Bannerè®¾ç½®å¤±è´¥: "+(e.message||"æœªçŸ¥é”™è¯¯"))}finally{N(!1)}}),className:"bg-[#3483FA] text-white px-6 py-3 rounded-md hover:bg-[#2968c8] flex items-center space-x-2",disabled:f,children:[f?"ä¿å­˜ä¸­...":"ä¿å­˜è®¾ç½®",!f&&u.jsx(z,{className:"w-5 h-5"})]}),u.jsx("button",{type:"button",onClick:()=>R(!1),className:"bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600",children:"å–æ¶ˆ"})]})]})]})})}),X&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[u.jsx(O,{className:"w-6 h-6 text-[#3483FA]"}),u.jsx("span",{children:"ç½‘ç«™è®¾ç½®"})]}),u.jsx("button",{onClick:xe,className:"text-gray-400 hover:text-gray-600",children:u.jsx(y,{className:"w-6 h-6"})})]}),u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Logo ç®¡ç†"}),u.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å½“å‰Logo"}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-16 h-16 bg-white border border-gray-300 rounded-lg flex items-center justify-center p-2",children:(null==(e=Z.site_logo_url)?void 0:e.value)?u.jsx("img",{src:Z.site_logo_url.value,alt:(null==(t=Z.site_logo_alt)?void 0:t.value)||"Logo",className:"max-w-full max-h-full object-contain",onError:e=>{e.target.src="/logo.svg"}}):u.jsx("div",{className:"text-gray-400 text-xs",children:"åŠ è½½ä¸­..."})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:["å½“å‰URL: ",(null==(a=Z.site_logo_url)?void 0:a.value)||"åŠ è½½ä¸­..."]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["æ›´æ–°æ—¶é—´: ",(null==(r=Z.site_logo_url)?void 0:r.updated_at)?new Date(Z.site_logo_url.updated_at).toLocaleString("zh-CN"):"æœªçŸ¥"]})]}),u.jsxs("button",{onClick:()=>d(null,null,function*(){var e;if(confirm("ç¡®å®šè¦åˆ é™¤å½“å‰logoå¹¶é‡ç½®ä¸ºé»˜è®¤logoå—ï¼Ÿ"))try{const t=null==(e=Z.site_logo_url)?void 0:e.value;if(!t||"/logo.svg"===t)return void alert("å½“å‰å·²ç»æ˜¯é»˜è®¤logo");const a=t.split("/").pop();if(!a)throw new Error("æ— æ³•èŽ·å–æ–‡ä»¶å");const{data:r,error:l}=yield s.functions.invoke("logo-delete",{body:{fileName:a,settingKey:"site_logo_url"}});if(l)throw l;alert("Logoåˆ é™¤æˆåŠŸï¼Œå·²é‡ç½®ä¸ºé»˜è®¤logo"),yield de()}catch(t){alert("Logoåˆ é™¤å¤±è´¥: "+(t.message||"æœªçŸ¥é”™è¯¯"))}}),className:"bg-red-500 text-white px-3 py-2 rounded-md hover:bg-red-600 text-sm flex items-center space-x-1",disabled:!(null==(l=Z.site_logo_url)?void 0:l.value)||"/logo.svg"===Z.site_logo_url.value,children:[u.jsx(B,{className:"w-4 h-4"}),u.jsx("span",{children:"é‡ç½®"})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ä¸Šä¼ æ–°Logo"}),u.jsxs("div",{className:"p-8 border-2 border-dashed rounded-lg text-center transition-colors "+(ae?"border-[#3483FA] bg-blue-50":"border-gray-300 hover:border-[#3483FA]"),onDragOver:e=>{e.preventDefault(),re(!0)},onDragLeave:e=>{e.preventDefault(),re(!1)},onDrop:e=>{e.preventDefault(),re(!1);const s=e.dataTransfer.files[0];if(!s)return;if(!["image/svg+xml","image/png","image/jpeg","image/jpg","image/webp"].includes(s.type))return void alert("è¯·é€‰æ‹©æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶ (SVG, PNG, JPG, WebP)");if(s.size>2097152)return void alert("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 2MB");Y(s);const t=new FileReader;t.onload=e=>{var s;ee(null==(s=e.target)?void 0:s.result)},t.readAsDataURL(s)},children:[Q?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("img",{src:Q,alt:"Logoé¢„è§ˆ",className:"max-w-32 max-h-32 object-contain border border-gray-200 rounded"})}),u.jsxs("div",{className:"text-sm text-gray-600",children:[u.jsx("strong",{children:"æ–‡ä»¶å:"})," ",null==W?void 0:W.name,u.jsx("br",{}),u.jsx("strong",{children:"æ–‡ä»¶å¤§å°:"})," ",W?(W.size/1024/1024).toFixed(2):0," MB",u.jsx("br",{}),u.jsx("strong",{children:"æ–‡ä»¶ç±»åž‹:"})," ",null==W?void 0:W.type]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsx($,{className:"mx-auto h-12 w-12 text-gray-400"}),u.jsx("div",{children:u.jsxs("label",{className:"cursor-pointer",children:[u.jsx("span",{className:"text-lg text-[#3483FA] font-medium",children:"ç‚¹å‡»ä¸Šä¼ æˆ–æ‹–æ”¾Logoæ–‡ä»¶"}),u.jsx("input",{type:"file",accept:"image/svg+xml,image/png,image/jpeg,image/jpg,image/webp",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(!t)return;if(!["image/svg+xml","image/png","image/jpeg","image/jpg","image/webp"].includes(t.type))return void alert("è¯·é€‰æ‹©æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶ (SVG, PNG, JPG, WebP)");if(t.size>2097152)return void alert("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 2MB");Y(t);const a=new FileReader;a.onload=e=>{var s;ee(null==(s=e.target)?void 0:s.result)},a.readAsDataURL(t)},className:"hidden",disabled:se})]})}),u.jsxs("p",{className:"text-sm text-gray-500",children:["æ”¯æŒæ ¼å¼: SVG, PNG, JPG, WebP",u.jsx("br",{}),"æœ€å¤§å¤§å°: 2MB",u.jsx("br",{}),"æŽ¨èå°ºå¯¸: 200x60px æˆ–ç›¸åŒæ¯”ä¾‹"]})]}),se&&u.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2",children:[u.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#3483FA]"}),u.jsx("span",{className:"text-[#3483FA] font-medium",children:"ä¸Šä¼ ä¸­..."})]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-4",children:[Q&&u.jsxs("button",{onClick:()=>d(null,null,function*(){if(W){te(!0);try{const e=new FormData;e.append("file",W);const{data:t,error:a}=yield s.functions.invoke("logo-upload",{body:e});if(a)throw a;alert("Logoä¸Šä¼ æˆåŠŸ!"),Y(null),ee(null),yield de(),H(!1)}catch(e){alert("Logoä¸Šä¼ å¤±è´¥: "+(e.message||"æœªçŸ¥é”™è¯¯"))}finally{te(!1)}}}),disabled:se,className:"bg-[#3483FA] text-white px-6 py-3 rounded-md hover:bg-[#2968c8] flex items-center space-x-2 disabled:opacity-50",children:[u.jsx(z,{className:"w-5 h-5"}),u.jsx("span",{children:se?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ Logo"})]}),u.jsx("button",{onClick:xe,className:"bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600",children:"å–æ¶ˆ"})]})]})})]})})})]})}):u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[u.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"ç®¡ç†å‘˜ç™»å½•"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"password",placeholder:"è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç  (19961015)",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#3483FA]",onKeyPress:e=>"Enter"===e.key&&ie()}),u.jsx("button",{onClick:ie,className:"btn-primary w-full py-3 font-medium",children:"ç™»å½•"})]})]})})};function K(){return x.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),u.jsxs(V,{children:[u.jsx(l,{}),u.jsx("div",{className:"min-h-screen flex flex-col",children:u.jsxs(U,{children:[u.jsx(R,{path:"/admin",element:u.jsx(Z,{})}),u.jsx(R,{path:"/*",element:u.jsxs(u.Fragment,{children:[u.jsx(t,{}),u.jsx(r,{}),u.jsx("main",{className:"flex-1",children:u.jsxs(U,{children:[u.jsx(R,{path:"/",element:u.jsx(i,{})}),u.jsx(R,{path:"/categoria/:slug",element:u.jsx(X,{})}),u.jsx(R,{path:"/producto/:id/:slug?",element:u.jsx(H,{})}),u.jsx(R,{path:"*",element:u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center",children:u.jsx("span",{className:"text-4xl text-gray-400",children:"ðŸ“±"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"PÃ¡gina no encontrada"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Parece que esta pÃ¡gina no existe. Te ayudamos a encontrar lo que buscas."})]}),u.jsx("div",{className:"space-y-3",children:u.jsx("a",{href:"/",className:"block w-full bg-[#3483FA] text-white px-6 py-3 rounded-md hover:bg-[#2968C8] transition-colors",children:"Ver Todos los Productos"})})]})})})]})}),u.jsx(a,{})]})})]})})]})}G.createRoot(document.getElementById("root")).render(u.jsx(x.StrictMode,{children:u.jsx(K,{})}))}},function(){return H||(0,X[a(X)[0]])((H={exports:{}}).exports,H),H.exports});export default Z();
